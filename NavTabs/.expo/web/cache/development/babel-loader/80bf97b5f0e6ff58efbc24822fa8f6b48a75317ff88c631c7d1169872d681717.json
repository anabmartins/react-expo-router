{"ast":null,"code":"\"use strict\";\nvar _classCallCheck = require(\"@babel/runtime/helpers/classCallCheck\");\nvar _createClass = require(\"@babel/runtime/helpers/createClass\");\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n    desc = {\n      enumerable: true,\n      get: function get() {\n        return m[k];\n      }\n    };\n  }\n  Object.defineProperty(o, k2, desc);\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n  __setModuleDefault(result, mod);\n  return result;\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.LogBoxLog = void 0;\nvar LogBoxSymbolication = __importStar(require(\"./LogBoxSymbolication\"));\nfunction componentStackToStack(componentStack) {\n  return componentStack.map(function (stack) {\n    var _a, _b, _c, _d;\n    return {\n      file: stack.fileName,\n      methodName: stack.content,\n      lineNumber: (_b = (_a = stack.location) === null || _a === void 0 ? void 0 : _a.row) !== null && _b !== void 0 ? _b : 0,\n      column: (_d = (_c = stack.location) === null || _c === void 0 ? void 0 : _c.column) !== null && _d !== void 0 ? _d : 0,\n      arguments: []\n    };\n  });\n}\nvar LogBoxLog = function () {\n  function LogBoxLog(data) {\n    _classCallCheck(this, LogBoxLog);\n    var _a;\n    this.symbolicated = {\n      stack: {\n        error: null,\n        stack: null,\n        status: \"NONE\"\n      },\n      component: {\n        error: null,\n        stack: null,\n        status: \"NONE\"\n      }\n    };\n    this.componentStackCache = null;\n    this.level = data.level;\n    this.type = (_a = data.type) !== null && _a !== void 0 ? _a : \"error\";\n    this.message = data.message;\n    this.stack = data.stack;\n    this.category = data.category;\n    this.componentStack = data.componentStack;\n    this.codeFrame = data.codeFrame;\n    this.isComponentError = data.isComponentError;\n    this.count = 1;\n  }\n  _createClass(LogBoxLog, [{\n    key: \"incrementCount\",\n    value: function incrementCount() {\n      this.count += 1;\n    }\n  }, {\n    key: \"getAvailableStack\",\n    value: function getAvailableStack(type) {\n      if (this.symbolicated[type].status === \"COMPLETE\") {\n        return this.symbolicated[type].stack;\n      }\n      return this.getStack(type);\n    }\n  }, {\n    key: \"retrySymbolicate\",\n    value: function retrySymbolicate(type, callback) {\n      if (this.symbolicated[type].status !== \"COMPLETE\") {\n        LogBoxSymbolication.deleteStack(this.getStack(type));\n        this.handleSymbolicate(type, callback);\n      }\n    }\n  }, {\n    key: \"symbolicate\",\n    value: function symbolicate(type, callback) {\n      if (this.symbolicated[type].status === \"NONE\") {\n        this.handleSymbolicate(type, callback);\n      }\n    }\n  }, {\n    key: \"getStack\",\n    value: function getStack(type) {\n      if (type === \"component\") {\n        if (this.componentStackCache == null) {\n          this.componentStackCache = componentStackToStack(this.componentStack);\n        }\n        return this.componentStackCache;\n      }\n      return this.stack;\n    }\n  }, {\n    key: \"handleSymbolicate\",\n    value: function handleSymbolicate(type, callback) {\n      var _this = this;\n      var _a;\n      if (type === \"component\" && !((_a = this.componentStack) === null || _a === void 0 ? void 0 : _a.length)) {\n        return;\n      }\n      if (this.symbolicated[type].status !== \"PENDING\") {\n        this.updateStatus(type, null, null, null, callback);\n        LogBoxSymbolication.symbolicate(this.getStack(type)).then(function (data) {\n          _this.updateStatus(type, null, data === null || data === void 0 ? void 0 : data.stack, data === null || data === void 0 ? void 0 : data.codeFrame, callback);\n        }, function (error) {\n          _this.updateStatus(type, error, null, null, callback);\n        });\n      }\n    }\n  }, {\n    key: \"updateStatus\",\n    value: function updateStatus(type, error, stack, codeFrame, callback) {\n      var lastStatus = this.symbolicated[type].status;\n      if (error != null) {\n        this.symbolicated[type] = {\n          error: error,\n          stack: null,\n          status: \"FAILED\"\n        };\n      } else if (stack != null) {\n        if (codeFrame) {\n          this.codeFrame = codeFrame;\n        }\n        this.symbolicated[type] = {\n          error: null,\n          stack: stack,\n          status: \"COMPLETE\"\n        };\n      } else {\n        this.symbolicated[type] = {\n          error: null,\n          stack: null,\n          status: \"PENDING\"\n        };\n      }\n      if (callback && lastStatus !== this.symbolicated[type].status) {\n        callback(this.symbolicated[type].status);\n      }\n    }\n  }]);\n  return LogBoxLog;\n}();\nexports.LogBoxLog = LogBoxLog;","map":{"version":3,"names":["LogBoxSymbolication","__importStar","require","componentStackToStack","componentStack","map","stack","file","fileName","methodName","content","lineNumber","_b","_a","location","row","column","_d","_c","arguments","LogBoxLog","data","_classCallCheck","symbolicated","error","status","component","componentStackCache","level","type","message","category","codeFrame","isComponentError","count","_createClass","key","value","incrementCount","getAvailableStack","getStack","retrySymbolicate","callback","deleteStack","handleSymbolicate","symbolicate","_this","length","updateStatus","then","lastStatus","exports"],"sources":["/home/martz/GitHub/react-expo-router/NavTabs/node_modules/@expo/metro-runtime/src/error-overlay/Data/LogBoxLog.ts"],"sourcesContent":["/**\n * Copyright (c) Evan Bacon.\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport * as LogBoxSymbolication from \"./LogBoxSymbolication\";\nimport type { Stack } from \"./LogBoxSymbolication\";\nimport type {\n  Category,\n  Message,\n  ComponentStack,\n  CodeFrame,\n} from \"./parseLogBoxLog\";\n\ntype SymbolicationStatus = \"NONE\" | \"PENDING\" | \"COMPLETE\" | \"FAILED\";\n\nexport type LogLevel = \"warn\" | \"error\" | \"fatal\" | \"syntax\";\n\nexport type LogBoxLogData = {\n  level: LogLevel;\n  type?: string;\n  message: Message;\n  stack: Stack;\n  category: string;\n  componentStack: ComponentStack;\n  codeFrame?: CodeFrame;\n  isComponentError: boolean;\n};\n\nexport type StackType = \"stack\" | \"component\";\n\nfunction componentStackToStack(componentStack: ComponentStack): Stack {\n  return componentStack.map((stack) => ({\n    file: stack.fileName,\n    methodName: stack.content,\n    lineNumber: stack.location?.row ?? 0,\n    column: stack.location?.column ?? 0,\n    arguments: [],\n  }));\n}\n\nexport class LogBoxLog {\n  message: Message;\n  type: string;\n  category: Category;\n  componentStack: ComponentStack;\n  stack: Stack;\n  count: number;\n  level: LogLevel;\n  codeFrame?: CodeFrame;\n  isComponentError: boolean;\n  symbolicated: Record<\n    StackType,\n    | { error: null; stack: null; status: \"NONE\" }\n    | { error: null; stack: null; status: \"PENDING\" }\n    | { error: null; stack: Stack; status: \"COMPLETE\" }\n    | { error: Error; stack: null; status: \"FAILED\" }\n  > = {\n    stack: {\n      error: null,\n      stack: null,\n      status: \"NONE\",\n    },\n    component: {\n      error: null,\n      stack: null,\n      status: \"NONE\",\n    },\n  };\n\n  constructor(data: LogBoxLogData) {\n    this.level = data.level;\n    this.type = data.type ?? \"error\";\n    this.message = data.message;\n    this.stack = data.stack;\n    this.category = data.category;\n    this.componentStack = data.componentStack;\n    this.codeFrame = data.codeFrame;\n    this.isComponentError = data.isComponentError;\n    this.count = 1;\n  }\n\n  incrementCount(): void {\n    this.count += 1;\n  }\n\n  getAvailableStack(type: StackType): Stack | null {\n    if (this.symbolicated[type].status === \"COMPLETE\") {\n      return this.symbolicated[type].stack;\n    }\n    return this.getStack(type);\n  }\n\n  retrySymbolicate(\n    type: StackType,\n    callback?: (status: SymbolicationStatus) => void\n  ): void {\n    if (this.symbolicated[type].status !== \"COMPLETE\") {\n      LogBoxSymbolication.deleteStack(this.getStack(type));\n      this.handleSymbolicate(type, callback);\n    }\n  }\n\n  symbolicate(\n    type: StackType,\n    callback?: (status: SymbolicationStatus) => void\n  ): void {\n    if (this.symbolicated[type].status === \"NONE\") {\n      this.handleSymbolicate(type, callback);\n    }\n  }\n\n  private componentStackCache: Stack | null = null;\n\n  private getStack(type: StackType): Stack {\n    if (type === \"component\") {\n      if (this.componentStackCache == null) {\n        this.componentStackCache = componentStackToStack(this.componentStack);\n      }\n      return this.componentStackCache;\n    }\n    return this.stack;\n  }\n\n  private handleSymbolicate(\n    type: StackType,\n    callback?: (status: SymbolicationStatus) => void\n  ): void {\n    if (type === \"component\" && !this.componentStack?.length) {\n      return;\n    }\n\n    if (this.symbolicated[type].status !== \"PENDING\") {\n      this.updateStatus(type, null, null, null, callback);\n      LogBoxSymbolication.symbolicate(this.getStack(type)).then(\n        (data) => {\n          this.updateStatus(type, null, data?.stack, data?.codeFrame, callback);\n        },\n        (error) => {\n          this.updateStatus(type, error, null, null, callback);\n        }\n      );\n    }\n  }\n\n  private updateStatus(\n    type: StackType,\n    error?: Error | null,\n    stack?: Stack | null,\n    codeFrame?: CodeFrame | null,\n    callback?: (status: SymbolicationStatus) => void\n  ): void {\n    const lastStatus = this.symbolicated[type].status;\n    if (error != null) {\n      this.symbolicated[type] = {\n        error,\n        stack: null,\n        status: \"FAILED\",\n      };\n    } else if (stack != null) {\n      if (codeFrame) {\n        this.codeFrame = codeFrame;\n      }\n\n      this.symbolicated[type] = {\n        error: null,\n        stack,\n        status: \"COMPLETE\",\n      };\n    } else {\n      this.symbolicated[type] = {\n        error: null,\n        stack: null,\n        status: \"PENDING\",\n      };\n    }\n\n    if (callback && lastStatus !== this.symbolicated[type].status) {\n      callback(this.symbolicated[type].status);\n    }\n  }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}