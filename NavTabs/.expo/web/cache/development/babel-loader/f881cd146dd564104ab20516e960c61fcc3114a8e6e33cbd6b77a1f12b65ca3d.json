{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nimport { StackRouter, useNavigationBuilder } from \"@react-navigation/native\";\nimport * as React from \"react\";\nimport { Screen } from \"./Screen\";\nimport { useContextKey } from \"../Route\";\nimport { useFilterScreenChildren } from \"../layouts/withLayoutContext\";\nimport { useSortedScreens } from \"../useScreens\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport var NavigatorContext = React.createContext(null);\nif (process.env.NODE_ENV !== \"production\") {\n  NavigatorContext.displayName = \"NavigatorContext\";\n}\nexport function Navigator(_ref) {\n  var initialRouteName = _ref.initialRouteName,\n    screenOptions = _ref.screenOptions,\n    children = _ref.children,\n    router = _ref.router;\n  var contextKey = useContextKey();\n  var _useFilterScreenChild = useFilterScreenChildren(children, {\n      isCustomNavigator: true,\n      contextKey: contextKey\n    }),\n    screens = _useFilterScreenChild.screens,\n    otherSlot = _useFilterScreenChild.children;\n  var sorted = useSortedScreens(screens != null ? screens : []);\n  if (!sorted.length) {\n    console.warn(\"Navigator at \\\"\" + contextKey + \"\\\" has no children.\");\n    return null;\n  }\n  return _jsx(QualifiedNavigator, {\n    initialRouteName: initialRouteName,\n    screenOptions: screenOptions,\n    screens: sorted,\n    contextKey: contextKey,\n    router: router,\n    children: otherSlot\n  });\n}\nfunction QualifiedNavigator(_ref2) {\n  var initialRouteName = _ref2.initialRouteName,\n    screenOptions = _ref2.screenOptions,\n    children = _ref2.children,\n    screens = _ref2.screens,\n    contextKey = _ref2.contextKey,\n    _ref2$router = _ref2.router,\n    router = _ref2$router === void 0 ? StackRouter : _ref2$router;\n  var _useNavigationBuilder = useNavigationBuilder(router, {\n      id: contextKey,\n      children: screens,\n      screenOptions: screenOptions,\n      initialRouteName: initialRouteName\n    }),\n    state = _useNavigationBuilder.state,\n    navigation = _useNavigationBuilder.navigation,\n    descriptors = _useNavigationBuilder.descriptors,\n    NavigationContent = _useNavigationBuilder.NavigationContent;\n  return _jsx(NavigatorContext.Provider, {\n    value: {\n      contextKey: contextKey,\n      state: state,\n      navigation: navigation,\n      descriptors: descriptors,\n      router: router\n    },\n    children: _jsx(NavigationContent, {\n      children: children\n    })\n  });\n}\nexport function useNavigatorContext() {\n  var context = React.useContext(NavigatorContext);\n  if (!context) {\n    throw new Error(\"useNavigatorContext must be used within a <Navigator />\");\n  }\n  return context;\n}\nexport function useSlot() {\n  var _descriptors$current$, _descriptors$current$2;\n  var context = useNavigatorContext();\n  var state = context.state,\n    descriptors = context.descriptors;\n  var current = state.routes.find(function (route, i) {\n    return state.index === i;\n  });\n  if (!current) {\n    return null;\n  }\n  return (_descriptors$current$ = (_descriptors$current$2 = descriptors[current.key]) == null ? void 0 : _descriptors$current$2.render()) != null ? _descriptors$current$ : null;\n}\nexport function Slot(props) {\n  var contextKey = useContextKey();\n  var context = React.useContext(NavigatorContext);\n  if ((context == null ? void 0 : context.contextKey) !== contextKey) {\n    return _jsx(Navigator, _objectSpread(_objectSpread({}, props), {}, {\n      children: _jsx(QualifiedSlot, {})\n    }));\n  }\n  return _jsx(QualifiedSlot, {});\n}\nexport function QualifiedSlot() {\n  return useSlot();\n}\nexport function DefaultNavigator() {\n  return _jsx(Navigator, {\n    children: _jsx(QualifiedSlot, {})\n  });\n}\nNavigator.Slot = Slot;\nNavigator.useContext = useNavigatorContext;\nNavigator.Screen = Screen;","map":{"version":3,"names":["StackRouter","useNavigationBuilder","React","Screen","useContextKey","useFilterScreenChildren","useSortedScreens","jsx","_jsx","NavigatorContext","createContext","process","env","NODE_ENV","displayName","Navigator","_ref","initialRouteName","screenOptions","children","router","contextKey","_useFilterScreenChild","isCustomNavigator","screens","otherSlot","sorted","length","console","warn","QualifiedNavigator","_ref2","_ref2$router","_useNavigationBuilder","id","state","navigation","descriptors","NavigationContent","Provider","value","useNavigatorContext","context","useContext","Error","useSlot","_descriptors$current$","_descriptors$current$2","current","routes","find","route","i","index","key","render","Slot","props","_objectSpread","QualifiedSlot","DefaultNavigator"],"sources":["/home/martz/GitHub/react-expo-router/NavTabs/node_modules/expo-router/src/views/Navigator.tsx"],"sourcesContent":["import {\n  RouterFactory,\n  StackRouter,\n  useNavigationBuilder,\n} from \"@react-navigation/native\";\nimport * as React from \"react\";\n\nimport { Screen } from \"./Screen\";\nimport { useContextKey } from \"../Route\";\nimport { useFilterScreenChildren } from \"../layouts/withLayoutContext\";\nimport { useSortedScreens } from \"../useScreens\";\n\ntype NavigatorTypes = ReturnType<typeof useNavigationBuilder>;\n\n// TODO: This might already exist upstream, maybe something like `useCurrentRender` ?\nexport const NavigatorContext = React.createContext<{\n  contextKey: string;\n  state: NavigatorTypes[\"state\"];\n  navigation: NavigatorTypes[\"navigation\"];\n  descriptors: NavigatorTypes[\"descriptors\"];\n  router: RouterFactory<any, any, any>;\n} | null>(null);\n\nif (process.env.NODE_ENV !== \"production\") {\n  NavigatorContext.displayName = \"NavigatorContext\";\n}\n\nexport type NavigatorProps = {\n  initialRouteName?: Parameters<\n    typeof useNavigationBuilder\n  >[1][\"initialRouteName\"];\n  screenOptions?: Parameters<typeof useNavigationBuilder>[1][\"screenOptions\"];\n  children?: Parameters<typeof useNavigationBuilder>[1][\"children\"];\n  router?: Parameters<typeof useNavigationBuilder>[0];\n};\n\n/** An unstyled custom navigator. Good for basic web layouts */\nexport function Navigator({\n  initialRouteName,\n  screenOptions,\n  children,\n  router,\n}: NavigatorProps) {\n  const contextKey = useContextKey();\n\n  // Allows adding Screen components as children to configure routes.\n  const { screens, children: otherSlot } = useFilterScreenChildren(children, {\n    isCustomNavigator: true,\n    contextKey,\n  });\n\n  const sorted = useSortedScreens(screens ?? []);\n\n  if (!sorted.length) {\n    console.warn(`Navigator at \"${contextKey}\" has no children.`);\n    return null;\n  }\n\n  return (\n    <QualifiedNavigator\n      initialRouteName={initialRouteName}\n      screenOptions={screenOptions}\n      screens={sorted}\n      contextKey={contextKey}\n      router={router}\n    >\n      {otherSlot}\n    </QualifiedNavigator>\n  );\n}\n\nfunction QualifiedNavigator({\n  initialRouteName,\n  screenOptions,\n  children,\n  screens,\n  contextKey,\n  router = StackRouter,\n}: NavigatorProps & { contextKey: string; screens: React.ReactNode[] }) {\n  const { state, navigation, descriptors, NavigationContent } =\n    useNavigationBuilder(router, {\n      // Used for getting the parent with navigation.getParent('/normalized/path')\n      id: contextKey,\n      children: screens,\n      screenOptions,\n      initialRouteName,\n    });\n\n  return (\n    <NavigatorContext.Provider\n      value={{\n        contextKey,\n        state,\n        navigation,\n        descriptors,\n        router,\n      }}\n    >\n      <NavigationContent>{children}</NavigationContent>\n    </NavigatorContext.Provider>\n  );\n}\n\nexport function useNavigatorContext() {\n  const context = React.useContext(NavigatorContext);\n  if (!context) {\n    throw new Error(\"useNavigatorContext must be used within a <Navigator />\");\n  }\n  return context;\n}\n\nexport function useSlot() {\n  const context = useNavigatorContext();\n\n  const { state, descriptors } = context;\n\n  const current = state.routes.find((route, i) => {\n    return state.index === i;\n  });\n\n  if (!current) {\n    return null;\n  }\n\n  return descriptors[current.key]?.render() ?? null;\n}\n\n/** Renders the currently selected content. */\nexport function Slot(props: Omit<NavigatorProps, \"children\">) {\n  const contextKey = useContextKey();\n  const context = React.useContext(NavigatorContext);\n  // Ensure the context is for the current contextKey\n  if (context?.contextKey !== contextKey) {\n    // Qualify the content and re-export.\n    return (\n      <Navigator {...props}>\n        <QualifiedSlot />\n      </Navigator>\n    );\n  }\n\n  return <QualifiedSlot />;\n}\n\nexport function QualifiedSlot() {\n  return useSlot();\n}\n\nexport function DefaultNavigator() {\n  return (\n    <Navigator>\n      <QualifiedSlot />\n    </Navigator>\n  );\n}\n\nNavigator.Slot = Slot;\nNavigator.useContext = useNavigatorContext;\n\n/** Used to configure route settings. */\nNavigator.Screen = Screen;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}